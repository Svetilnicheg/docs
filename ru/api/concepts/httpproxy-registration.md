# Зарегистрировать прокси-сервер

Чтобы зарегистрировать новый прокси-сервер отправьте AJAX-запрос из консоли браузера, авторизовавшись под именем заказчика.

## Запрос {#request}

```js
$.ajax({
      url: '/api/new/requester/proxy/proxy',
      method: 'POST',
      contentType: 'application/json',
      data: JSON.stringify({
        "params": {
          "accessRights": "ASSIGNMENT_PRIVATE",
          "type": "HTTP",
          "additionalHeaders": {},
          "additionalQueryArgs": {},
          "baseUrl": "example.com/some-path"
        },
        "name": "test-proxy"
      })
});
```

#|
||**Параметр**|**Описание**||
||**accessRights** | **string \| обязательный**

Уровень доступа к файлам, размещенным на сервере заказчика. Возможные значения:

- ASSIGNMENT_PRIVATE — доступ имеют только исполнители в задании которых присутствует ссылка на сервер. Подходит для контента заданий.

  {% cut "Пример" %}

  В Толоке выполняется вызов: `toloka.dev/api/proxy/test-proxy/test-path`.

  Если задание при этом содержит входное поле с типом aдрес (url) или cтрока (string), и оно имеет значение:

  - `proxy/test-proxy/example-id`,
  - `test-proxy/example-id`,
  - `example-id`,

  запрос будет проксирован на сервер заказчика.

  Если в задании нет поля с таким значением, запрос проксирован не будет.

  {% endcut %}

- PRIVATE — доступ имеют только исполнители, которые выполняют задание соответствующего заказчика (владельца сервера). При этом не выполняется проверка на наличие в задании ссылки на сервер). Подходит для общих действий в заданиях.
- PUBLIC — доступ имеют все исполнители Толоки. Подходит для файлов в инструкциях.||
||**type** | **string \| обязательный**

Протокол передачи данных. Возможное значение: `HTTP`.||
||**baseUrl** | **string \| обязательный**

URL, по которому находится сервер заказчика.

Например, сервер с [именем](#name) «test-proxy» размещен по URL `example.com/some-path`.

В этом случае при вызове в Толоке HTTP-метода по URL `toloka.dev/api/proxy/test-proxy/test-path`, запрос к серверу заказчика будет сделан по URL `example.com/some-path/test-path`.

Если вызов выполнен в рамках шаблона, к URL дополнительно будет добавлен **assignment_id**. Таким образом на сервер заказчика также будет передана информация в рамках какого задания был сделан запрос. Например: `example.com/some-path/test-path?assignmentId=12831298712937213`.

**assignment_id** — **string** Идентификатор выдачи страницы заданий.
||
||**name** | **string \| обязательный**

Название сервера заказчика. Будет включено в URL запроса. Допустимые символы в названии: латинские буквы, цифры, дефис «-».

Должно быть уникально в рамках системы.

Например, сервер с именем «test-proxy» будет доступен в Толоке по URL: `toloka.dev/api/proxy/test-proxy`.||
||**additionalHeaders[]** | **array of strings**

Дополнительные заголовки, которые будут переданы в запросе на сервер заказчика. Например: ``` "additionalHeaders":{"Authorization":["Basic--//--TOKEN--//--"]} ```
||
||**additionalQueryArgs[]** | **array of strings**

Дополнительные параметры, которые будут переданы в запросе на сервер заказчика. Например:<br/>``` "additionalQueryArgs":{"test-arg":["12345"]} ```
||
|#

{% note info %}

Чтобы узнать полный URL для доступа к данным на созданном сервере используйте метод `getProxyUrl(path)` (см. раздел [Класс Task]({{ requester-js-class-task }}) Руководства заказчика).

{% endnote %}

## Ответ {#response}

Содержит идентификатор (`id`) и параметры, переданные при регистрации сервера, в формате JSON.